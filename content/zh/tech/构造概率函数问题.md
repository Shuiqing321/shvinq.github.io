+++
title= "构造概率函数"
date= "2021-09-05T07:00:42+08:00"
tags= ["算法"]
slug= "Algorithm1"
+++

#### 问题描述

1.给出一个随机函数randX()，可以均匀随机获得一个1~X的数。

2.根据这个随机数函数构造一个rangY()函数，可以均匀随机获得1~Y的一个数。

例如leetcode470用rand7()构造rand10()。

#### 问题解法

**思路**：将rand7() 拆解成rand01()。rand01()是一个等概率返回0和1的随机函数。

可以根据这个01函数构造出任意randY()函数。

1.已知可以等概率获得1~7，在rand01()循环执行rand7()，如果等于4就一直循环，小于4返回0，大于4返回1，这样就得到了等概率的0和1。

2.构造1~10的等概率函数，可以先构造0~9，然后加1即可

3.因为要构造0~9，需要4个二进制才能表示完全

代码如下：

```c++
int rand01()
{
    int ret;
    do ret = rand7(); while(ret == 4);
    return ret > 4?1:0;
}
int rand10()
{
    int ret;
    do 
    {
        ret = (rand01() << 3) + (rand01() << 2) + (rand01() << 1) + rand01();
    }
    while(ret > 9);
    return ret + 1;
}
```

